"use strict";function compareValues(e,t){var a={"á":"a","é":"e","í":"i","ó":"o","ú":"u","à":"a","è":"e","ì":"i","ò":"o","ú":"u","ä":"a","ë":"e","ï":"i","ö":"o","ü":"u"};return e=String(e).toLowerCase().trim().replace(/\s\s+/g," ").replace(/[áéíóúàèìòùäëïöü]/g,function(e){return a[e]}),t=String(t).toLowerCase().trim().replace(/\s\s+/g," ").replace(/[áéíóúàèìòùäëïöü]/g,function(e){return a[e]}),!!e.includes(t)}function showMessage(e,t){$("#fixedLog p").text(e).css({color:"#FFF",background:t}),$("#fixedLog").fadeIn("slow",function(){setTimeout(function(){$("#fixedLog").fadeOut("slow")},2e3)})}function fadeOut(){document.getElementById("projectIntroContainer").classList.add("fadeOut"),setTimeout(()=>{document.getElementById("projectIntroContainer").style.display="none",document.body.classList.remove("noScroll")},500)}$(function(){function e(){for(var e in advancedFilters)$('<button name="'+e+'" title="'+r(advancedFilters[e])+'">'+e+"</button>").insertAfter("#headerBarAdvancedFilters span.separator"),$('<div class="filter" name="'+e+'" title="'+r(advancedFilters[e])+'"><p>'+e+'</p><button class="delete icon-delete icon" title="remove filter"></button></div>').insertAfter("#columnsViewFiltersWrapper span.separator");$("#headerBarSearchBasicFilters, #headerBarAdvancedFilters").show().scrollTop(0),psHeaderBarSearchBasicFilters.update(),psHeaderBarAdvancedFilters.update(),$("#headerBarSearchBasicFilters, #headerBarAdvancedFilters").hide(),$("#columnsViewFiltersWrapper").scrollTop(0),psColumnsViewFiltersWrapper.update(),t()}function t(){$("#headerBarAdvancedFilters button, #columnsViewFiltersWrapper div.filter").off(),$("#headerBarAdvancedFilters button").on("click touchstart",function(e){if(e.preventDefault(),$(this).hasClass("current"))$(this).removeClass("current"),$('#columnsViewFiltersWrapper div[name="'+$(this).attr("name")+'"]').removeClass("current"),a({});else{for(var t in $("#headerBarSearchInput").val(""),basicFilters)basicFilters[t]=!1;$("#headerBarSearchBasicFilters button, #headerBarAdvancedFilters button, #columnsViewFiltersWrapper div").removeClass("current"),$(this).addClass("current"),$('#columnsViewFiltersWrapper div[name="'+$(this).attr("name")+'"]').addClass("current"),a(advancedFilters[$(this).attr("name")])}}),$("#columnsViewFiltersWrapper div.filter").on("click touchstart",function(e){if(e.preventDefault(),$(e.target).hasClass("delete"))confirm('Are you sure you want to delete the filter "'+$(this).attr("name")+'"?\n'+$(this).attr("title"))&&($(this).hasClass("current")&&a({}),$(this).remove(),$('#headerBarAdvancedFilters button[name="'+$(this).attr("name")+'"]').remove(),document.cookie=$(this).attr("name")+"=;max-age=0",$("#headerBarAdvancedFilters").show().scrollTop(0),psHeaderBarAdvancedFilters.update(),$("#headerBarAdvancedFilters").hide(),$("#columnsViewFiltersWrapper").scrollTop(0),psColumnsViewFiltersWrapper.update());else if($(this).hasClass("current"))$(this).removeClass("current"),$('#headerBarAdvancedFilters button[name="'+$(this).attr("name")+'"]').removeClass("current"),a({});else{for(var t in $("#headerBarSearchInput").val(""),basicFilters)basicFilters[t]=!1;$("#headerBarSearchBasicFilters button, #headerBarAdvancedFilters button, #columnsViewFiltersWrapper div").removeClass("current"),$(this).addClass("current"),$('#headerBarAdvancedFilters button[name="'+$(this).attr("name")+'"]').addClass("current"),a(advancedFilters[$(this).attr("name")])}}),$("#headerBarAdvancedFilters button").on("contextmenu",function(e){e.preventDefault(),confirm('Are you sure you want to delete the filter "'+$(this).attr("name")+'"?\n'+$(this).attr("title"))&&($(this).hasClass("current")&&a({}),$(this).remove(),$('#columnsViewFiltersWrapper div[name="'+$(this).attr("name")+'"]').remove(),document.cookie=$(this).attr("name")+"=;max-age=0",$("#headerBarAdvancedFilters").show().scrollTop(0),psHeaderBarAdvancedFilters.update(),$("#headerBarAdvancedFilters").hide(),$("#columnsViewFiltersWrapper").scrollTop(0),psColumnsViewFiltersWrapper.update())})}function a(e){var t,a=!0;for(var r in printersPersistent)t=!0,t&&printersPersistent[r].basicInfo&&(t&&e.hostname&&!compareValues(printersPersistent[r].basicInfo.hostname,e.hostname)&&(t=!1),t&&e.ip&&!compareValues(printersPersistent[r].basicInfo.ip,e.ip)&&(t=!1),t&&e.modelname&&!compareValues(printersPersistent[r].basicInfo.modelname,e.modelname)&&(t=!1)),t&&printersPersistent[r].detailedInfo&&(t&&e.firmware&&!compareValues(printersPersistent[r].detailedInfo.firmwareVersion,e.firmware)&&(t=!1),t&&e.status&&!compareValues(printersPersistent[r].detailedInfo.status,e.status)&&(t=!1)),t&&e.creationDate&&!compareValues(printersPersistent[r].creationDate,e.creationDate)&&(t=!1),t&&printersPersistent[r].lastUpdate&&t&&e.lastUpdateStatus&&!compareValues(printersPersistent[r].lastUpdate.status,e.lastUpdateStatus)&&(t=!1),t&&printersPersistent[r].metadata&&(t&&e.alias&&!compareValues(printersPersistent[r].metadata.alias,e.alias)&&(t=!1),t&&e.location&&!compareValues(printersPersistent[r].metadata.location,e.location)&&(t=!1),t&&e.workteam&&!compareValues(printersPersistent[r].metadata.workteam,e.workteam)&&(t=!1),t&&e.reservedBy&&!compareValues(printersPersistent[r].metadata.reservedBy,e.reservedBy)&&(t=!1),t&&e.reservedUntil&&!compareValues(printersPersistent[r].metadata.reservedUntil,e.reservedUntil)&&(t=!1)),t?(a=!1,$('#iconsViewPopulation div.printer[name="'+r+'"]').show(),$('#listViewPopulation tr.printer[name="'+r+'"]').show(),$('#columnsViewPopulation div.printer[name="'+r+'"]').show()):($('#iconsViewPopulation div.printer[name="'+r+'"]').hide(),$('#listViewPopulation tr.printer[name="'+r+'"]').hide(),$('#columnsViewPopulation div.printer[name="'+r+'"]').hide());a?$("p.noPrinters").show():$("p.noPrinters").hide(),$("#iconsView").scrollTop(0),psIconsView.update(),$("#listView").scrollTop(0),psListView.update(),$("#columnsViewPopulation").scrollTop(0),psColumnsViewPopulation.update()}function r(e){var t,a="";for(var r in e)e[r]&&("number"==typeof e[r]&&e[r]>31536e6?(t=new Date(e[r]),a+=r+": "+("0"+t.getDate()).slice(-2)+"/"+("0"+(t.getMonth()+1)).slice(-2)+"/"+t.getFullYear()+" "+("0"+t.getHours()).slice(-2)+":"+("0"+t.getMinutes()).slice(-2)+"\n"):a+=r+": "+e[r]+"\n");return a}e(),$("#advancedFiltersMenuTrigger, #headerBarAdvancedFilters").hover(function(){$("#headerBarAdvancedFilters button").length>0&&$("#headerBarAdvancedFilters").show()},function(){$("#headerBarAdvancedFilters").hide()}),$("#advancedFiltersMenuTrigger").on("click touchstart",function(e){e.preventDefault(),$("#filterFormDetails input").val(""),$("#filterFormInfo input").val(""),$("#filterFormName input").val(""),$("#filterFormDetails input.datetimepicker, #filterFormInfo input.datetimepicker").datetimepicker(dateTimePickerOptions),$("#advancedFiltersMenu").is(":hidden")&&($("#menus, #advancedFiltersMenu").fadeIn("slow"),$("#advancedFiltersMenu").scrollTop(0),psAdvancedFiltersMenu.update())}),$("#advancedFiltersMenu > button.actionButton").on("click touchstart",function(e){e.preventDefault();var i=$('#filterFormName input[name="filterName"]').val().trim().replace(/\s\s+/g," ");if(i){var s=$('#filterFormDetails input[name="creationDate"]').val().trim().replace(/\s\s+/g," ").split(/\/|\s|\:/),n=$('#filterFormDetails input[name="lastUpdateStatus"]').val().trim().replace(/\s\s+/g," ").split(/\/|\s|\:/),o=$('#filterFormInfo input[name="reservedUntil"]').val().trim().replace(/\s\s+/g," ").split(/\/|\s|\:/),l={hostname:$('#filterFormDetails input[name="hostname"]').val().trim().replace(/\s\s+/g," "),ip:$('#filterFormDetails input[name="ip"]').val().trim().replace(/\s\s+/g," "),modelname:$('#filterFormDetails input[name="modelname"]').val().trim().replace(/\s\s+/g," "),firmware:$('#filterFormDetails input[name="firmware"]').val().trim().replace(/\s\s+/g," "),status:$('#filterFormDetails input[name="status"]').val().trim().replace(/\s\s+/g," "),creationDate:new Date(s[2],s[1]-1,s[0],s[3],s[4]).getTime(),lastUpdateStatus:new Date(n[2],n[1]-1,n[0],n[3],n[4]).getTime(),alias:$('#filterFormInfo input[name="alias"]').val().trim().replace(/\s\s+/g," "),location:$('#filterFormInfo input[name="location"]').val().trim().replace(/\s\s+/g," "),workteam:$('#filterFormInfo input[name="workteam"]').val().trim().replace(/\s\s+/g," "),reservedBy:$('#filterFormInfo input[name="reservedBy"]').val().trim().replace(/\s\s+/g," "),reservedUntil:new Date(o[2],o[1]-1,o[0],o[3],o[4]).getTime()};for(var d in l)""==l[d]&&(l[d]=null);for(var c in $("#headerBarSearchInput").val(""),basicFilters)basicFilters[c]=!1;$("#headerBarSearchBasicFilters button, #headerBarAdvancedFilters button, #columnsViewFiltersWrapper div").removeClass("current"),$('#headerBarAdvancedFilters button[name="'+i+'"]').remove(),$('#columnsViewFiltersWrapper div[name="'+i+'"]').remove(),$('<button class="current" name="'+i+'" title="'+r(l)+'">'+i+"</button>").insertAfter("#headerBarAdvancedFilters span.separator"),$('<div class="filter current" name="'+i+'" title="'+r(l)+'"><p>'+i+'</p><button class="delete icon-delete icon" title="remove filter"></button></div>').insertAfter("#columnsViewFiltersWrapper span.separator"),$("#headerBarAdvancedFilters").show().scrollTop(0),psHeaderBarAdvancedFilters.update(),$("#headerBarAdvancedFilters").hide(),$("#columnsViewFiltersWrapper").scrollTop(0),psColumnsViewFiltersWrapper.update(),advancedFilters[i]=l,document.cookie=i+"="+JSON.stringify(l)+";max-age=315360000",t(),a(l),$("#menus, #advancedFiltersMenu").fadeOut("slow")}else $('#filterFormName input[name="filterName"]').focus(),showMessage("Filter name is mandatory","red")})}),$(function(){function e(e){var t,a=!0,r=!0;for(var i in basicFilters)if(basicFilters[i]){a=!1;break}for(var s in printersPersistent)t=!1,!t&&printersPersistent[s].basicInfo&&(!t&&(a||basicFilters.hostname)&&compareValues(printersPersistent[s].basicInfo.hostname,e)&&(t=!0),!t&&(a||basicFilters.ip)&&compareValues(printersPersistent[s].basicInfo.ip,e)&&(t=!0),!t&&(a||basicFilters.modelname)&&compareValues(printersPersistent[s].basicInfo.modelname,e)&&(t=!0)),!t&&printersPersistent[s].detailedInfo&&(!t&&(a||basicFilters.firmware)&&compareValues(printersPersistent[s].detailedInfo.firmwareVersion,e)&&(t=!0),!t&&(a||basicFilters.status)&&compareValues(printersPersistent[s].detailedInfo.status,e)&&(t=!0)),!t&&printersPersistent[s].metadata&&(!t&&(a||basicFilters.alias)&&compareValues(printersPersistent[s].metadata.alias,e)&&(t=!0),!t&&(a||basicFilters.location)&&compareValues(printersPersistent[s].metadata.location,e)&&(t=!0),!t&&(a||basicFilters.workteam)&&compareValues(printersPersistent[s].metadata.workteam,e)&&(t=!0),!t&&(a||basicFilters.reservedBy)&&compareValues(printersPersistent[s].metadata.reservedBy,e)&&(t=!0),!t&&(a||basicFilters.notes)&&compareValues(printersPersistent[s].metadata.notes,e)&&(t=!0)),t?(r=!1,$('#iconsViewPopulation div.printer[name="'+s+'"]').show(),$('#listViewPopulation tr.printer[name="'+s+'"]').show(),$('#columnsViewPopulation div.printer[name="'+s+'"]').show()):($('#iconsViewPopulation div.printer[name="'+s+'"]').hide(),$('#listViewPopulation tr.printer[name="'+s+'"]').hide(),$('#columnsViewPopulation div.printer[name="'+s+'"]').hide());r?$("p.noPrinters").show():$("p.noPrinters").hide(),$("#iconsView").scrollTop(0),psIconsView.update(),$("#listView").scrollTop(0),psListView.update(),$("#columnsViewPopulation").scrollTop(0),psColumnsViewPopulation.update()}$("#headerBarSearchInput").on("keyup",function(t){t.preventDefault(),e($("#headerBarSearchInput").val())}),$("#headerBarSearchBasicFilters button").on("click touchstart",function(t){t.preventDefault(),$("#headerBarAdvancedFilters button").removeClass("current"),$(this).hasClass("current")?$(this).removeClass("current"):$(this).addClass("current"),basicFilters[$(this).attr("name")]=!basicFilters[$(this).attr("name")],e($("#headerBarSearchInput").val())})}),$(function(){$("#configMenuTrigger").on("click touchstart",function(e){e.preventDefault(),$("#configMenu").is(":hidden")&&($("#loadingBar").show(),$.ajax({async:!0,crossDomain:!0,url:"http://"+serverAddress+":"+serverPort+"/config/data",method:"GET",success:function(e,t){e.logLevel?$('#configForm input[name="logLevel"]').val(e.logLevel):$('#configForm input[name="logLevel"]').val(""),e.logSeparator?$('#configForm input[name="logSeparator"]').val(e.logSeparator):$('#configForm input[name="logSeparator"]').val(""),e.updateFrequency?$('#configForm input[name="updateFrequency"]').val(e.updateFrequency/1e3):$('#configForm input[name="updateFrequency"]').val(""),e.deleteTimeout?$('#configForm input[name="deleteTimeout"]').val(e.deleteTimeout/6e4):$('#configForm input[name="deleteTimeout"]').val(""),$("#loadingBar").hide(),$("#menus, #configMenu").fadeIn("slow"),$("#configMenu").scrollTop(0),psConfigMenu.update()},error:function(e,t,a){$("#loadingBar").hide(),showMessage(a?e.status+" "+e.statusText:"Unable to connect to server","red")}}))}),$("#configForm").on("submit",function(e){e.preventDefault(),confirm("Are you sure you want to modify these options?")&&($("#loadingBar").show(),$.ajax({async:!0,crossDomain:!0,url:"http://"+serverAddress+":"+serverPort+"/config/update",method:"PUT",headers:{"Content-Type":"application/json"},processData:!1,data:JSON.stringify({logLevel:parseInt($('#configForm input[name="logLevel"]').val()),logSeparator:parseInt($('#configForm input[name="logSeparator"]').val()),updateFrequency:1e3*parseInt($('#configForm input[name="updateFrequency"]').val()),deleteTimeout:6e4*parseInt($('#configForm input[name="deleteTimeout"]').val())}),success:function(e,t){showMessage("Configuration successfully updated","green"),$("#loadingBar").hide(),$("#menus, #configMenu").fadeOut("slow")},error:function(e,t,a){$("#loadingBar").hide(),showMessage(a?e.status+" "+e.statusText:"Unable to connect to server","red")}}))})}),$(function(){for(var e=document.cookie.split(/\;|\=/),t=0;t<e.length-1;t+=2)switch(e[t].trim()){case"defaultView":defaultView=e[t+1].trim();break;case"sortingConfig":sortingConfig=JSON.parse(e[t+1].trim());break;case"listViewHeaders":listViewHeaders=JSON.parse(e[t+1].trim());break;default:advancedFilters[e[t].trim()]=JSON.parse(e[t+1].trim())}});var defaultView="iconsView",printersPersistent=new Object,advancedFilters=new Object,basicFilters={hostname:!1,ip:!1,modelname:!1,firmware:!1,status:!1,alias:!1,location:!1,workteam:!1,reservedBy:!1,notes:!1},sortingConfig={param:"modelname",direction:!0},listViewHeaders={hostname:!1,ip:!0,modelname:!0,firmware:!0,status:!0,creationDate:!1,lastUpdateStatus:!1,alias:!0,location:!1,workteam:!1,reservedBy:!0,reservedUntil:!1},dateTimePickerOptions={controlType:"select",oneLine:!0,timeInput:!0,dateFormat:"dd/mm/yy",timeFormat:"HH:mm"},serverAddress="localhost",serverPort=8084,psOptions={minScrollbarLength:20},psHeaderBarSearchBasicFilters=new PerfectScrollbar("#headerBarSearchBasicFilters",psOptions),psHeaderBarAdvancedFilters=new PerfectScrollbar("#headerBarAdvancedFilters",psOptions),psIconsView=new PerfectScrollbar("#iconsView",psOptions),psListView=new PerfectScrollbar("#listView",psOptions),psColumnsViewFiltersWrapper=new PerfectScrollbar("#columnsViewFiltersWrapper",psOptions),psColumnsViewPopulation=new PerfectScrollbar("#columnsViewPopulation",psOptions),psColumnsViewPrinterWrapper=new PerfectScrollbar("#columnsViewPrinterWrapper",psOptions),psInfoMenu=new PerfectScrollbar("#infoMenu",psOptions),psEditMenu=new PerfectScrollbar("#editMenu",psOptions),psAdvancedFiltersMenu=new PerfectScrollbar("#advancedFiltersMenu",psOptions),psConfigMenu=new PerfectScrollbar("#configMenu",psOptions),psListViewConfigMenu=new PerfectScrollbar("#listViewConfigMenu",psOptions),psCreateReservationMenu=new PerfectScrollbar("#createReservationMenu",psOptions);$(function(){function e(){$("#iconsView").is(":hidden")&&(document.cookie="defaultView=iconsView;max-age=315360000",$("#listView, #columnsView").hide(),$("#iconsView").show(),$("#iconsView").scrollTop(0),psIconsView.update(),$("#listViewTrigger, #columnsViewTrigger").removeClass("current"),$("#iconsViewTrigger").addClass("current"))}function t(){$("#listView").is(":hidden")&&(document.cookie="defaultView=listView;max-age=315360000",$("#iconsView, #columnsView").hide(),$("#listView").show(),$("#listView").scrollTop(0),psListView.update(),$("#iconsViewTrigger, #columnsViewTrigger").removeClass("current"),$("#listViewTrigger").addClass("current"))}function a(){$("#columnsView").is(":hidden")&&(document.cookie="defaultView=columnsView;max-age=315360000",$("#iconsView, #listView").hide(),$("#columnsView").show(),$("#columnsViewFiltersWrapper").scrollTop(0),$("#columnsViewPopulation").scrollTop(0),$("#columnsViewPrinterWrapper").scrollTop(0),psColumnsViewFiltersWrapper.update(),psColumnsViewPopulation.update(),psColumnsViewPrinterWrapper.update(),$("#iconsViewTrigger, #listViewTrigger").removeClass("current"),$("#columnsViewTrigger").addClass("current"))}switch(defaultView){case"iconsView":e();break;case"listView":t();break;case"columnsView":a();break;default:e()}$("#iconsViewTrigger").on("click touchstart",e),$("#listViewTrigger").on("click touchstart",t),$("#columnsViewTrigger").on("click touchstart",a),$("#menusLeftover, #menusWrapper").on("click touchstart",function(e){!$("#infoMenu").is(":visible")||$(e.target).is("#infoMenu, #infoMenu *")&&!$(e.target).is(".closeButton")||(e.preventDefault(),$("#menus, #infoMenu").fadeOut("slow")),!$("#editMenu").is(":visible")||$(e.target).is("#editMenu, #editMenu *, #infoMenu button.actionButton")&&!$(e.target).is(".closeButton")||(e.preventDefault(),$("#menus, #editMenu").fadeOut("slow")),!$("#advancedFiltersMenu").is(":visible")||$(e.target).is("#advancedFiltersMenu, #advancedFiltersMenu *")&&!$(e.target).is(".closeButton")||(e.preventDefault(),$("#menus, #advancedFiltersMenu").fadeOut("slow")),!$("#configMenu").is(":visible")||$(e.target).is("#configMenu, #configMenu *")&&!$(e.target).is(".closeButton")||(e.preventDefault(),$("#menus, #configMenu").fadeOut("slow")),!$("#listViewConfigMenu").is(":visible")||$(e.target).is("#listViewConfigMenu, #listViewConfigMenu *")&&!$(e.target).is(".closeButton")||(e.preventDefault(),$("#menus, #listViewConfigMenu").fadeOut("slow")),!$("#createReservationMenu").is(":visible")||$(e.target).is("#createReservationMenu, #createReservationMenu *")&&!$(e.target).is(".closeButton")||(e.preventDefault(),$("#menus, #createReservationMenu").hide())}),$("#menus > div").on("click touchstart",function(e){$(e.target).is("input.datetimepicker")||$("input.datetimepicker").datepicker("hide")}),$(window).on("resize",function(e){psHeaderBarSearchBasicFilters.update(),psHeaderBarAdvancedFilters.update(),psIconsView.update(),psListView.update(),psColumnsViewFiltersWrapper.update(),psColumnsViewPopulation.update(),psColumnsViewPrinterWrapper.update(),psInfoMenu.update(),psEditMenu.update(),psAdvancedFiltersMenu.update(),psConfigMenu.update(),psListViewConfigMenu.update(),psCreateReservationMenu.update()})}),$(function(){function e(){$("#loadingBar").show(),$.ajax({async:!0,crossDomain:!0,url:"http://"+serverAddress+":"+serverPort+"/printers/list",method:"GET",success:function(e,r){for(var i,s,n,o=0;o<e.length;o++){e[o].basicInfo||(e[o].basicInfo={}),e[o].detailedInfo||(e[o].detailedInfo={}),e[o].metadata||(e[o].metadata={calendar:[]}),e[o].metadata.calendar||(e[o].metadata.calendar=[]),e[o].lastUpdate||(e[o].lastUpdate={}),e[o].metadata.reservedBy=null,e[o].metadata.reservedUntil=null,i=(new Date).getTime();for(var d=0;d<e[o].metadata.calendar.length;d++)if(e[o].metadata.calendar[d].start<=i&&e[o].metadata.calendar[d].end>i){e[o].metadata.reservedBy=e[o].metadata.calendar[d].title,e[o].metadata.reservedUntil=e[o].metadata.calendar[d].end;break}}switch(sortingConfig.param){case"hostname":s="basicInfo",n="hostname";break;case"ip":s="basicInfo",n="ip";break;case"modelname":s="basicInfo",n="modelname";break;case"firmware":s="detailedInfo",n="firmwareVersion";break;case"status":s="detailedInfo",n="status";break;case"creationDate":s="creationDate",n=null;break;case"lastUpdateStatus":s="lastUpdate",n="status";break;case"alias":s="metadata",n="alias";break;case"location":s="metadata",n="location";break;case"workteam":s="metadata",n="workteam";break;case"reservedBy":s="metadata",n="reservedBy";break;case"reservedUntil":s="metadata",n="reservedUntil";break;default:s="basicInfo",n="modelname"}for(var c in t(l(e,s,n,sortingConfig.direction)),a(),$("#headerBarSearchInput").val(""),basicFilters)basicFilters[c]=!1;for(var p in $("#headerBarSearchBasicFilters button, #headerBarAdvancedFilters button, #columnsViewFiltersWrapper div").removeClass("current"),listViewHeaders)listViewHeaders[p]?($('#listViewHeaders th[name="'+p+'"]').show(),$('#listViewPopulation td[name="'+p+'"]').show()):($('#listViewHeaders th[name="'+p+'"]').hide(),$('#listViewPopulation td[name="'+p+'"]').hide());$("#columnsViewPrinterWrapper, #loadingBar").hide()},error:function(e,t,a){$("#loadingBar").hide(),showMessage(a?e.status+" "+e.statusText:"Unable to connect to server","red")}})}function t(e){var t,a,r='<div id="iconsViewPopulation" class="wrapper"><p class="noPrinters">No printers to show with selected filters</p>',i='<tbody id="listViewPopulation">',s='<div id="columnsViewPopulation" class="wrapper"><p class="noPrinters">No printers to show with selected filters</p>';printersPersistent=new Object;for(var n=0;n<e.length;n++){if(t=d(),r+='<div name="'+t+'" class="printer',i+='<tr name="'+t+'" class="printer',s+='<div name="'+t+'" class="printer',e[n].detailedInfo.status)switch(e[n].detailedInfo.status.toLowerCase().trim().replace(/\s\s+/g," ")){case"awake":r+=" connected",i+=" connected",s+=" connected",a="Awake";break;case"sleep":r+=" missing",i+=" missing",s+=" missing",a="Sleep";break;case"unreachable":r+=" missing",i+=" missing",s+=" missing",a="Unreachable";break;case"turn off":r+=" missing",i+=" missing",s+=" missing",a="Turn Off";break;case"with alerts":r+=" warning",i+=" warning",s+=" warning",a="With Alerts";break;case"busy with activities":r+=" connected",i+=" connected",s+=" connected",a="Busy With Activities";break;case"with system errors":r+=" error",i+=" error",s+=" error",a="With System Errors";break;case"not initialized":r+=" missing",i+=" missing",s+=" missing",a="Not Initialized";break;default:r+=" missing",i+=" missing",s+=" missing",a="Unknown"}else r+=" missing",i+=" missing",s+=" missing",a="Unknown";r+='" title="'+a+'">',i+='">',s+='" title="'+a+'">',r+='<div class="info">',s+='<div class="info">',e[n].basicInfo.hostname?i+='<td name="hostname" title="'+e[n].basicInfo.hostname.trim().replace(/\s\s+/g," ")+'">'+e[n].basicInfo.hostname.trim().replace(/\s\s+/g," ")+"</td>":i+='<td name="hostname">&mdash;</td>',e[n].basicInfo.ip?(r+="<p>"+e[n].basicInfo.ip.trim().replace(/\s\s+/g," ")+"</p>",i+='<td name="ip" title="'+e[n].basicInfo.ip.trim().replace(/\s\s+/g," ")+'">'+e[n].basicInfo.ip.trim().replace(/\s\s+/g," ")+"</td>",s+="<p>"+e[n].basicInfo.ip.trim().replace(/\s\s+/g," ")+"</p>"):(r+="<p>&mdash;</p>",i+='<td name="ip">&mdash;</td>',s+="<p>&mdash;</p>"),e[n].basicInfo.modelname?(r+="<p>"+e[n].basicInfo.modelname.trim().replace(/\s\s+/g," ")+"</p>",i+='<td name="modelname" title="'+e[n].basicInfo.modelname.trim().replace(/\s\s+/g," ")+'">'+e[n].basicInfo.modelname.trim().replace(/\s\s+/g," ")+"</td>",s+="<p>"+e[n].basicInfo.modelname.trim().replace(/\s\s+/g," ")+"</p>"):(r+="<p>&mdash;</p>",i+='<td name="modelname">&mdash;</td>',s+="<p>&mdash;</p>"),e[n].detailedInfo.firmwareVersion?(r+="<p>"+e[n].detailedInfo.firmwareVersion.trim().replace(/\s\s+/g," ")+"</p>",i+='<td name="firmware" title="'+e[n].detailedInfo.firmwareVersion.trim().replace(/\s\s+/g," ")+'">'+e[n].detailedInfo.firmwareVersion.trim().replace(/\s\s+/g," ")+"</td>"):(r+="<p>&mdash;</p>",i+='<td name="firmware">&mdash;</td>'),r+="</div>",s+="</div>",r+='<div class="status">',i+='<td class="status" name="status" title="'+a+'">'+a+"</td>",s+='<div class="status">',e[n].creationDate?i+='<td name="creationDate" title="'+c(e[n].creationDate)+'">'+c(e[n].creationDate)+"</td>":i+='<td name="creationDate">&mdash;</td>',e[n].lastUpdate.status?i+='<td name="lastUpdateStatus" title="'+c(e[n].lastUpdate.status)+'">'+c(e[n].lastUpdate.status)+"</td>":i+='<td name="lastUpdateStatus">&mdash;</td>',e[n].metadata.alias?i+='<td name="alias" title="'+e[n].metadata.alias.trim().replace(/\s\s+/g," ")+'">'+e[n].metadata.alias.trim().replace(/\s\s+/g," ")+"</td>":i+='<td name="alias">&mdash;</td>',e[n].metadata.location?i+='<td name="location" title="'+e[n].metadata.location.trim().replace(/\s\s+/g," ")+'">'+e[n].metadata.location.trim().replace(/\s\s+/g," ")+"</td>":i+='<td name="location">&mdash;</td>',e[n].metadata.workteam?i+='<td name="workteam" title="'+e[n].metadata.workteam.trim().replace(/\s\s+/g," ")+'">'+e[n].metadata.workteam.trim().replace(/\s\s+/g," ")+"</td>":i+='<td name="workteam">&mdash;</td>',e[n].metadata.reservedBy&&e[n].metadata.reservedUntil?(r+="<p>RESERVED</p>",i+='<td name="reservedBy" title="'+e[n].metadata.reservedBy.trim().replace(/\s\s+/g," ")+'">'+e[n].metadata.reservedBy.trim().replace(/\s\s+/g," ")+"</td>",i+='<td name="reservedUntil" title="'+c(e[n].metadata.reservedUntil)+'">'+c(e[n].metadata.reservedUntil)+"</td>",s+="<p>R</p>"):(i+='<td name="reservedBy">&mdash;</td>',i+='<td name="reservedUntil">&mdash;</td>'),r+="</div></div>",i+="</tr>",s+="</div></div>",printersPersistent[t]=e[n]}r+="</div>",i+="</tbody>",s+="</div>",$("#iconsViewPopulation").remove(),$("#listViewPopulation").remove(),$("#columnsViewPopulation").remove(),$(r).appendTo("#iconsView"),$(i).appendTo("#listView table.wrapper"),$(s).appendTo("#columnsViewPrintersColumn"),psIconsView.update(),psListView.update(),psColumnsViewPopulation.destroy(),psColumnsViewPopulation=new PerfectScrollbar("#columnsViewPopulation",psOptions)}function a(){$("#iconsViewPopulation div.printer, #listViewPopulation tr.printer, #columnsViewPopulation div.printer").off(),$("#iconsViewPopulation div.printer, #listViewPopulation tr.printer").on("click touchstart",function(e){e.preventDefault();var t=i('<div id="infoMenuDetails" class="wrapper right">',printersPersistent[$(e.currentTarget).attr("name")]),a=s('<div id="infoMenuInformation" class="wrapper right">',printersPersistent[$(e.currentTarget).attr("name")].metadata),r=n('<div id="infoMenuNotes" class="wrapper center">',printersPersistent[$(e.currentTarget).attr("name")].metadata);$("#infoMenuDetails").remove(),$("#infoMenuInformation").remove(),$("#infoMenuNotes").remove(),$(t).appendTo("#infoMenuDetailsWrapper"),$(a).appendTo("#infoMenuInformationWrapper"),$(r).appendTo("#infoMenuNotesWrapper"),$("#infoMenu button.actionButton").attr("name",$(e.currentTarget).attr("name")),$("#infoMenu").is(":hidden")&&($("#menus, #infoMenu").fadeIn("slow"),$("#infoMenu").scrollTop(0),psInfoMenu.update())}),$("#columnsViewPopulation div.printer").on("click touchstart",function(e){if(e.preventDefault(),$(e.currentTarget).hasClass("current"))$(e.currentTarget).removeClass("current"),$("#columnsViewPrinterWrapper").hide();else{var t=i('<div id="columnsViewPrinterDetails" class="wrapper right">',printersPersistent[$(e.currentTarget).attr("name")]),a=s('<div id="columnsViewPrinterInformation" class="wrapper right">',printersPersistent[$(e.currentTarget).attr("name")].metadata),r=n('<div id="columnsViewPrinterNotes" class="wrapper center">',printersPersistent[$(e.currentTarget).attr("name")].metadata);$("#columnsViewPrinterDetails").remove(),$("#columnsViewPrinterInformation").remove(),$("#columnsViewPrinterNotes").remove(),$(t).appendTo("#columnsViewPrinterDetailsWrapper"),$(a).appendTo("#columnsViewPrinterInformationWrapper"),$(r).appendTo("#columnsViewPrinterNotesWrapper"),$("#columnsViewPrinterWrapper button.actionButton").attr("name",$(e.currentTarget).attr("name")),$("#columnsViewPopulation div.current").removeClass("current"),$(e.currentTarget).addClass("current"),$("#columnsViewPrinterWrapper").fadeIn("slow"),$("#columnsViewPrinterWrapper").scrollTop(0),psColumnsViewPrinterWrapper.update()}}),$("#iconsViewPopulation div.printer, #listViewPopulation tr.printer, #columnsViewPopulation div.printer").on("contextmenu",function(t){t.preventDefault();var a=$(t.currentTarget).attr("name");$("#contextMenuPrinters").css({top:t.pageY+"px",left:t.pageX+"px"}).show(),$(document).off().on("mousedown",function(t){if(t.preventDefault(),$(t.target).is('#contextMenuPrinters button[name="calendar"]'))p.events=printersPersistent[a].metadata.calendar,p.deleteMode=!1,$("#calendarView").attr("name",a),$("#calendarMenu").fadeIn("slow"),$("#calendarView").fullCalendar("destroy"),$("#calendarView").fullCalendar(p);else if($(t.target).is('#contextMenuPrinters button[name="removeRes"]')){for(var r,i,s=printersPersistent[a],n=(new Date).getTime(),o=0;o<s.metadata.calendar.length;o++)if(s.metadata.calendar[o].start<=n&&s.metadata.calendar[o].end>n){r=s.metadata.calendar[o],i=o;break}i>=0?confirm("Are you sure you want to remove the reservation in course?\n\tReserved by: "+r.title+"\n\tStart: "+c(r.start)+"\n\tEnd: "+c(r.end))&&(s.metadata.calendar.splice(i,1),$("#loadingBar").show(),$.ajax({async:!0,crossDomain:!0,url:"http://"+serverAddress+":"+serverPort+"/printers/update?ip="+s.basicInfo.ip+"&hostname="+s.basicInfo.hostname,method:"PUT",headers:{"Content-Type":"application/json"},processData:!1,data:JSON.stringify(s.metadata),success:function(t,a){showMessage("Reserve successfully removed","green"),e()},error:function(e,t,a){$("#loadingBar").hide(),showMessage(a?e.status+" "+e.statusText:"Unable to connect to server","red")}})):(showMessage("Printer has no reservation now","gray"),e())}else if($(t.target).is('#contextMenuPrinters button[name="forceUpdate"]')){s=printersPersistent[a];$("#loadingBar").show(),$.ajax({async:!0,crossDomain:!0,url:"http://"+serverAddress+":"+serverPort+"/printers/update?ip="+s.basicInfo.ip+"&hostname="+s.basicInfo.hostname,method:"GET",success:function(t,a){showMessage("Printer successfully updated (force mode)","green"),e()},error:function(e,t,a){$("#loadingBar").hide(),showMessage(a?e.status+" "+e.statusText:"Unable to connect to server","red")}})}$("#contextMenuPrinters").hide(),$(document).off()})})}function r(e,t,a){if(p.deleteMode){for(var r,i=printersPersistent[$("#calendarView").attr("name")],s=0;s<i.metadata.calendar.length;s++)if(i.metadata.calendar[s].title==e.title&&i.metadata.calendar[s].start==e.start._i&&i.metadata.calendar[s].end==e.end._i){r=s;break}r>=0&&confirm("Are you sure you want to remove the reservation?\n\tReserved by: "+e.title+"\n\tStart: "+c(e.start._i)+"\n\tEnd: "+c(e.end._i))&&(i.metadata.calendar.splice(r,1),$("#loadingBar").show(),$.ajax({async:!0,crossDomain:!0,url:"http://"+serverAddress+":"+serverPort+"/printers/update?ip="+i.basicInfo.ip+"&hostname="+i.basicInfo.hostname,method:"PUT",headers:{"Content-Type":"application/json"},processData:!1,data:JSON.stringify(i.metadata),success:function(e,t){showMessage("Calendar successfully updated","green"),p.events=i.metadata.calendar,p.deleteMode=!1,$("#calendarView").fullCalendar("destroy"),$("#calendarView").fullCalendar(p),$("#loadingBar").hide()},error:function(e,t,a){$("#loadingBar").hide(),showMessage(a?e.status+" "+e.statusText:"Unable to connect to server","red")}}))}}function i(e,t){if(t.basicInfo.hostname?e+='<p title="'+t.basicInfo.hostname.trim().replace(/\s\s+/g," ")+'">'+t.basicInfo.hostname.trim().replace(/\s\s+/g," ")+"</p>":e+="<p>&mdash;</p>",t.basicInfo.ip?e+='<p title="'+t.basicInfo.ip.trim().replace(/\s\s+/g," ")+'">'+t.basicInfo.ip.trim().replace(/\s\s+/g," ")+"</p>":e+="<p>&mdash;</p>",t.basicInfo.modelname?e+='<p title="'+t.basicInfo.modelname.trim().replace(/\s\s+/g," ")+'">'+t.basicInfo.modelname.trim().replace(/\s\s+/g," ")+"</p>":e+="<p>&mdash;</p>",t.detailedInfo.firmwareVersion?e+='<p title="'+t.detailedInfo.firmwareVersion.trim().replace(/\s\s+/g," ")+'">'+t.detailedInfo.firmwareVersion.trim().replace(/\s\s+/g," ")+"</p>":e+="<p>&mdash;</p>",
t.detailedInfo.status){switch(e+='<p class="status',t.detailedInfo.status.toLowerCase().trim().replace(/\s\s+/g," ")){case"awake":e+=" connected";break;case"sleep":case"unreachable":case"turn off":e+=" missing";break;case"with alerts":e+=" warning";break;case"busy with activities":e+=" connected";break;case"with system errors":e+=" error";break;case"not initialized":e+=" missing";break;default:e+=" missing"}e+='" title="'+t.detailedInfo.status.trim().replace(/\s\s+/g," ")+'">'+t.detailedInfo.status.trim().replace(/\s\s+/g," ")+"</p>"}else e+='<p class="status missing">Unknown</p>';return t.creationDate?e+='<p title="'+c(t.creationDate)+'">'+c(t.creationDate)+"</p>":e+="<p>&mdash;</p>",t.lastUpdate.status?e+='<p title="'+c(t.lastUpdate.status)+'">'+c(t.lastUpdate.status)+"</p>":e+="<p>&mdash;</p>",e+="</div>",e}function s(e,t){return t.alias?e+='<p title="'+t.alias.trim().replace(/\s\s+/g," ")+'">'+t.alias.trim().replace(/\s\s+/g," ")+"</p>":e+="<p>&mdash;</p>",t.location?e+='<p title="'+t.location.trim().replace(/\s\s+/g," ")+'">'+t.location.trim().replace(/\s\s+/g," ")+"</p>":e+="<p>&mdash;</p>",t.workteam?e+='<p title="'+t.workteam.trim().replace(/\s\s+/g," ")+'">'+t.workteam.trim().replace(/\s\s+/g," ")+"</p>":e+="<p>&mdash;</p>",t.reservedBy?e+='<p title="'+t.reservedBy.trim().replace(/\s\s+/g," ")+'">'+t.reservedBy.trim().replace(/\s\s+/g," ")+"</p>":e+="<p>&mdash;</p>",t.reservedUntil?e+='<p title="'+c(t.reservedUntil)+'">'+c(t.reservedUntil)+"</p>":e+="<p>&mdash;</p>",e+="</div>",e}function n(e,t){return t.notes?e+='<p title="'+t.notes.trim().replace(/\s\s+/g," ")+'">'+t.notes.trim().replace(/\s\s+/g," ")+"</p>":e+="<p>&mdash;</p>",e+="</div>",e}function o(e){e.alias?$('#editForm input[name="alias"]').val(e.alias.trim().replace(/\s\s+/g," ")):$('#editForm input[name="alias"]').val(""),e.location?$('#editForm input[name="location"]').val(e.location.trim().replace(/\s\s+/g," ")):$('#editForm input[name="location"]').val(""),e.workteam?$('#editForm input[name="workteam"]').val(e.workteam.trim().replace(/\s\s+/g," ")):$('#editForm input[name="workteam"]').val(""),e.reservedBy?$('#editForm p[name="reservedBy"]').text(e.reservedBy.trim().replace(/\s\s+/g," ")).attr("title",e.reservedBy.trim().replace(/\s\s+/g," ")):$('#editForm p[name="reservedBy"]').text("—").attr("title",""),e.reservedUntil?$('#editForm p[name="reservedUntil"]').text(c(e.reservedUntil)).attr("title",c(e.reservedUntil)):$('#editForm p[name="reservedUntil"]').text("—").attr("title",""),e.notes?($("#editMenuNotesWrapper textarea").val(e.notes.trim().replace(/\s\s+/g," ")),$("#editMenuNotesWrapper textarea").css({width:"400px",height:"40px"})):($("#editMenuNotesWrapper textarea").val(""),$("#editMenuNotesWrapper textarea").css({width:"200px",height:"16px"}))}function l(e,t,a,r){return e.sort(function(e,i){if(r){if(!t||!a)return!e[t]||!!i[t]&&("string"==typeof e[t]&&"string"==typeof i[t]?e[t].toLowerCase()>i[t].toLowerCase()?1:e[t].toLowerCase()<i[t].toLowerCase()?-1:0:e[t]>i[t]?1:e[t]<i[t]?-1:0);if(!e[t][a])return!0;if(!i[t][a])return!1;if("basicInfo"!=t||"ip"!=a)return"string"==typeof e[t][a]&&"string"==typeof i[t][a]?e[t][a].toLowerCase()>i[t][a].toLowerCase()?1:e[t][a].toLowerCase()<i[t][a].toLowerCase()?-1:0:e[t][a]>i[t][a]?1:e[t][a]<i[t][a]?-1:0;for(var s=e[t][a].split("."),n=i[t][a].split("."),o=0;o<s.length;o++){if(parseInt(s[o])>parseInt(n[o]))return!0;if(parseInt(s[o])<parseInt(n[o]))return!1}}else{if(!t||!a)return!!e[t]&&(!i[t]||("string"==typeof e[t]&&"string"==typeof i[t]?i[t].toLowerCase()>e[t].toLowerCase()?1:i[t].toLowerCase()<e[t].toLowerCase()?-1:0:i[t]>e[t]?1:i[t]<e[t]?-1:0));if(!e[t][a])return!1;if(!i[t][a])return!0;if("basicInfo"!=t||"ip"!=a)return"string"==typeof e[t][a]&&"string"==typeof i[t][a]?i[t][a].toLowerCase()>e[t][a].toLowerCase()?1:i[t][a].toLowerCase()<e[t][a].toLowerCase()?-1:0:i[t][a]>e[t][a]?1:i[t][a]<e[t][a]?-1:0;for(s=e[t][a].split("."),n=i[t][a].split("."),o=0;o<s.length;o++){if(parseInt(s[o])<parseInt(n[o]))return!0;if(parseInt(s[o])>parseInt(n[o]))return!1}}})}function d(){var e,t,a="";for(e=0;e<32;e++)t=16*Math.random()|0,8!=e&&12!=e&&16!=e&&20!=e||(a+="-"),a+=(12==e?4:16==e?3&t|8:t).toString(16);return a}function c(e){return e=new Date(e),("0"+e.getDate()).slice(-2)+"/"+("0"+(e.getMonth()+1)).slice(-2)+"/"+e.getFullYear()+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)}var p={allDayDefault:!1,aspectRatio:"auto",businessHours:{dow:[1,2,3,4,5],start:"8:00",end:"18:00"},deleteMode:!1,customButtons:{add:{text:"+",click:function(){$("#createReservationForm input").val(""),$("#createReservationForm input.datetimepicker").datetimepicker(dateTimePickerOptions),$("#createReservationMenu").is(":hidden")&&($("#menus, #createReservationMenu").show(),$("#createReservationMenu").scrollTop(0),psCreateReservationMenu.update())}},remove:{text:"–",click:function(){p.deleteMode?$("#calendarView").fullCalendar("option","eventColor","#3A87AD"):($("#calendarView").fullCalendar("option","eventColor","#E40000"),showMessage("Delete Mode: click on a reservation to delete it","gray")),p.deleteMode=!p.deleteMode}},exit:{icon:"x",click:function(){$("#calendarMenu").fadeOut("slow"),$("#calendarView").fullCalendar("destroy"),e()}}},dayPopoverFormat:"dddd, D MMMM",defaultView:"month",displayEventEnd:!0,eventClick:r,eventLimit:!0,firstDay:1,header:{left:"prev,next today add,remove",center:"title",right:"month,agendaWeek,agendaDay,listWeek exit"},height:window.innerHeight-60,navLinks:!0,nowIndicator:!0,slotLabelFormat:"H:mm",timeFormat:"H:mm",timezone:"local",views:{month:{titleFormat:"MMMM YYYY"},agendaWeek:{columnHeaderFormat:"ddd D",titleFormat:"D MMMM YYYY"},agendaDay:{titleFormat:"D MMMM YYYY"},listWeek:{titleFormat:"D MMMM YYYY"}},windowResize:function(){$("#calendarView").fullCalendar("option","height",window.innerHeight-60)},handleWindowResize:!0};$("#listViewHeaders th[name="+sortingConfig.param+"]").addClass("current"),sortingConfig.direction?$("#listViewHeaders th[name="+sortingConfig.param+"] span").addClass("icon-arrowUp").show():$("#listViewHeaders th[name="+sortingConfig.param+"] span").addClass("icon-arrowDown").show(),e(),$("#infoMenu button.actionButton, #columnsViewPrinterWrapper button.actionButton").on("click touchstart",function(e){e.preventDefault();var t=i('<div id="editMenuDetails" class="wrapper right">',printersPersistent[e.currentTarget.name]);$("#editMenuDetails").remove(),$(t).appendTo("#editMenuDetailsWrapper"),o(printersPersistent[e.currentTarget.name].metadata),$("#editForm input.datetimepicker").datetimepicker(dateTimePickerOptions),$("#editMenu button.actionButton").attr("name",e.currentTarget.name),$("#editMenu").is(":hidden")&&($("#menus").is(":hidden")&&$("#menus").fadeIn("slow"),$("#infoMenu").is(":visible")&&$("#infoMenu").hide(),$("#editMenu").fadeIn("slow"),$("#editMenu").scrollTop(0),psEditMenu.update())}),$("#createReservationMenu > button.actionButton").on("click touchstart",function(e){e.preventDefault();var t=printersPersistent[$("#calendarView").attr("name")],a=$('#createReservationForm input[name="reservationStart"]').val().trim().replace(/\s\s+/g," ").split(/\/|\s|\:/),r=$('#createReservationForm input[name="reservationEnd"]').val().trim().replace(/\s\s+/g," ").split(/\/|\s|\:/),i={title:$('#createReservationForm input[name="reservedBy"]').val().trim().replace(/\s\s+/g," "),start:new Date(a[2],a[1]-1,a[0],a[3],a[4]).getTime(),end:new Date(r[2],r[1]-1,r[0],r[3],r[4]).getTime()};if(""==i.title||""==a||""==r)showMessage("All fields are mandatory","red");else if(i.start>=i.end)showMessage("Reservation end must be after its start","red");else{for(var s=!1,n=0;n<t.metadata.calendar.length;n++){if(i.start>=t.metadata.calendar[n].start&&i.start<t.metadata.calendar[n].end){s=!0;break}if(i.end>t.metadata.calendar[n].start&&i.end<=t.metadata.calendar[n].end){s=!0;break}if(i.start>=t.metadata.calendar[n].start&&i.end<=t.metadata.calendar[n].end){s=!0;break}if(i.start<=t.metadata.calendar[n].start&&i.end>=t.metadata.calendar[n].end){s=!0;break}}s?showMessage("Already exists a reservation in the selected interval","red"):(t.metadata.calendar.push(i),$("#loadingBar").show(),$.ajax({async:!0,crossDomain:!0,url:"http://"+serverAddress+":"+serverPort+"/printers/update?ip="+t.basicInfo.ip+"&hostname="+t.basicInfo.hostname,method:"PUT",headers:{"Content-Type":"application/json"},processData:!1,data:JSON.stringify(t.metadata),success:function(e,a){showMessage("Calendar successfully updated","green"),p.events=t.metadata.calendar,p.deleteMode=!1,$("#calendarView").fullCalendar("destroy"),$("#calendarView").fullCalendar(p),$("#loadingBar, #menus, #createReservationMenu").hide()},error:function(e,t,a){$("#loadingBar").hide(),showMessage(a?e.status+" "+e.statusText:"Unable to connect to server","red")}}))}}),$("#editMenu > button.actionButton").on("click touchstart",function(t){t.preventDefault();var a=printersPersistent[$("#editMenu button.actionButton").attr("name")],r={alias:$('#editForm input[name="alias"]').val().trim().replace(/\s\s+/g," "),location:$('#editForm input[name="location"]').val().trim().replace(/\s\s+/g," "),workteam:$('#editForm input[name="workteam"]').val().trim().replace(/\s\s+/g," "),reservedBy:null,reservedUntil:null,notes:$("#editMenuNotesWrapper textarea").val().trim().replace(/\s\s+/g," "),calendar:a.metadata.calendar};for(var i in r)""==r[i]&&(r[i]=null);$("#loadingBar").show(),$.ajax({async:!0,crossDomain:!0,url:"http://"+serverAddress+":"+serverPort+"/printers/update?ip="+a.basicInfo.ip+"&hostname="+a.basicInfo.hostname,method:"PUT",headers:{"Content-Type":"application/json"},processData:!1,data:JSON.stringify(r),success:function(t,a){showMessage("Information successfully updated","green"),e(),$("#menus, #editMenu").fadeOut("slow")},error:function(e,t,a){$("#loadingBar").hide(),showMessage(a?e.status+" "+e.statusText:"Unable to connect to server","red")}})}),$("#listViewHeaders th").on("click touchstart",function(t){t.preventDefault(),sortingConfig.param==$(t.currentTarget).attr("name")?sortingConfig.direction?(sortingConfig.direction=!1,$("#listViewHeaders th[name="+sortingConfig.param+"] span").removeClass("icon-arrowUp"),$("#listViewHeaders th[name="+sortingConfig.param+"] span").addClass("icon-arrowDown")):(sortingConfig.direction=!0,$("#listViewHeaders th[name="+sortingConfig.param+"] span").removeClass("icon-arrowDown"),$("#listViewHeaders th[name="+sortingConfig.param+"] span").addClass("icon-arrowUp")):(sortingConfig.param=$(t.currentTarget).attr("name"),sortingConfig.direction=!0,$("#listViewHeaders th").removeClass("current"),$("#listViewHeaders th[name="+sortingConfig.param+"]").addClass("current"),$("#listViewHeaders th span").removeClass("icon-arrowUp icon-arrowDown").hide(),$("#listViewHeaders th[name="+sortingConfig.param+"] span").addClass("icon-arrowUp").show()),document.cookie="sortingConfig="+JSON.stringify(sortingConfig)+";max-age=315360000",e()}),$("#listViewHeaders").on("contextmenu",function(e){e.preventDefault(),$("#contextMenuHeaders").css({top:e.pageY+"px",left:e.pageX+"px"}).show(),$(document).off().on("mousedown",function(e){for(var t in e.preventDefault(),listViewHeaders)listViewHeaders[t]?$('#listViewConfigMenu input[type="checkbox"][name="'+t+'"]').prop("checked",!0):$('#listViewConfigMenu input[type="checkbox"][name="'+t+'"]').prop("checked",!1);$(e.target).is('#contextMenuHeaders button[name="configCols"]')&&$("#listViewConfigMenu").is(":hidden")&&($("#menus, #listViewConfigMenu").fadeIn("slow"),$("#listViewConfigMenu").scrollTop(0),psListViewConfigMenu.update()),$("#contextMenuHeaders").hide(),$(document).off()})}),$('#listViewConfigMenu input[type="checkbox"]').on("click touchstart",function(e){var t=$(e.target).attr("name");$(e.target).is(":checked")?($('#listViewHeaders th[name="'+t+'"]').show(),$('#listViewPopulation td[name="'+t+'"]').show()):($('#listViewHeaders th[name="'+t+'"]').hide(),$('#listViewPopulation td[name="'+t+'"]').hide()),listViewHeaders[t]=!listViewHeaders[t],document.cookie="listViewHeaders="+JSON.stringify(listViewHeaders)+";max-age=315360000"})}),document.body.classList.add("noScroll");const projectIntroText="Application with the aim of analyzing the local network in search of prototypes of printers capturing and storing their information.<br>Through the interface, users can modify the information of the detected printers and reserve them to be able to use and work freely with them for a period of time.";document.getElementById("projectIntroText").innerHTML=projectIntroText,document.getElementById("projectIntroContent").style.maxWidth=document.getElementById("projectIntroImg").offsetWidth+"px",setTimeout(()=>{document.getElementById("projectIntroContent").style.maxWidth="900px"},500);